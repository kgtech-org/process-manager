# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a Process Manager application for telecommunications companies, designed to digitize and manage procedural documentation. The system allows collaborative creation of processes through multi-step forms, with features for digital signatures, PDF export, and monthly performance validation through incident reports.

## Architecture

- **Backend**: Go/Gin with MongoDB, Redis, JWT authentication, camelCase JSON APIs
- **Frontend**: Next.js 14 with Shadcn UI and Tailwind CSS
- **Storage**: MinIO for object storage (profile pictures, documents)
- **Infrastructure**: Full Docker containerization with health checks

## Code Standards and Conventions

### File Naming Convention
The project uses descriptive file naming with folder-based suffixes for better organization:

**Backend Structure** (`/backend/internal/`):
```
models/          â†’ *.model.go         (auth.model.go, user.model.go)
services/        â†’ *.service.go       (jwt.service.go, email.service.go) 
handlers/        â†’ *.handler.go       (auth.handler.go, user.handler.go)
routes/          â†’ *.routes.go        (auth.routes.go, departments.routes.go)
middleware/      â†’ *.middleware.go    (auth.middleware.go)
helpers/         â†’ *.helper.go        (validation.helper.go, upload.helper.go)
```

**Benefits:**
- Immediate file purpose identification
- Better IDE navigation and search
- Consistent organization across all layers
- Clear separation of concerns

### JSON API Standards
All API requests and responses use **camelCase** formatting:

**Request Format:**
```json
{
  "departmentId": "507f1f77bcf86cd799439011",
  "jobPositionId": "507f1f77bcf86cd799439012", 
  "requiredSkills": ["Go", "MongoDB"],
  "createdAt": "2025-01-15T10:30:00Z"
}
```

**Response Format:**
```json
{
  "success": true,
  "message": "Operation completed successfully",
  "data": {
    "userId": "507f1f77bcf86cd799439011",
    "lastLogin": "2025-01-15T09:15:00Z",
    "validatedAt": "2025-01-15T08:00:00Z",
    "departmentId": "507f1f77bcf86cd799439013"
  }
}
```

**Key Conversions:**
- `department_id` â†’ `departmentId`
- `job_position_id` â†’ `jobPositionId`
- `created_at` â†’ `createdAt`
- `updated_at` â†’ `updatedAt`
- `last_login` â†’ `lastLogin`
- `required_skills` â†’ `requiredSkills`

### Authentication & Security Architecture
- **3-Step Registration**: Email â†’ OTP â†’ Profile completion
- **JWT Tokens**: Access/refresh token pairs with Redis storage
- **Role-based Security**: Admin/Manager/User with granular permissions
- **Route Protection**: RequireAuth(), RequireManager(), RequireAdmin()
- **File Upload Security**: Content validation, size limits, MinIO integration

## Contributing Workflow

All development follows a GitHub issue-based workflow with MCP integration:

### ðŸ¤– Claude Code MCP Integration Rules

When working on this project, always follow these rules:

1. **Use MCP GitHub Tools**: Always use MCP GitHub tools for issue and branch management
2. **Issue-to-Branch Workflow**: Create branches from GitHub issues using MCP tools, never with local git commands
3. **Automated Operations**: Let Claude Code handle GitHub operations like creating PRs, managing issues, and branch operations
4. **Proper Linking**: Maintain GitHub's native issue-to-branch linking through MCP tools

### Workflow Steps

1. **Issue Creation**: All features, bugs, and improvements start with a GitHub issue
2. **Branch Creation**: Create work branches from GitHub issues using MCP tools:
   - Use GitHub's "Create a branch" feature from the issue
   - GitHub automatically creates branches with format: `{issue-number}-{issue-title-slug}`
   - Fetch and checkout the branch locally: `git fetch origin && git checkout {branch-name}`

3. **Development**: Work on the feature/fix in your branch
4. **Pull Request**: Use MCP tools to create PRs that reference the issue
5. **Review & Merge**: PR gets reviewed and merged after approval

### Branch Examples (Auto-generated by GitHub)
```
23-user-authentication-system
15-fix-pdf-export-error
8-update-api-documentation
42-improve-ui-components
```

### Important Reminders for Claude Code
- **NEVER** create branches manually with `git checkout -b`
- **ALWAYS** use MCP GitHub tools for GitHub operations
- **ALWAYS** create branches from issues to maintain proper tracking
- **PREFER** MCP operations over manual GitHub web interface

## Domain Context

This project is related to telecommunications process management, specifically for Togocom's infrastructure including:
- Process documentation and validation
- Network surveillance procedures
- Service restoration workflows
- Performance metrics tracking
- Multi-level approval systems